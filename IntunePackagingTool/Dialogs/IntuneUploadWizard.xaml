<Window x:Class="IntunePackagingTool.IntuneUploadWizard"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Upload to Microsoft Intune" 
        Height="750" Width="1000"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        Background="#F5F7FA">

    <Window.Resources>
        <!-- Styles are now in Themes/ModernTheme.xaml -->
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Progress Header -->
            <RowDefinition Height="*"/>
            <!-- Step Content -->
            <RowDefinition Height="Auto"/>
            <!-- Navigation Footer -->
        </Grid.RowDefinitions>

        <!-- PROGRESS HEADER -->
        <Border Grid.Row="0" Background="{StaticResource PrimaryBrush}">
            <Border.Effect>
                <DropShadowEffect Color="Black" Opacity="0.15" ShadowDepth="3" BlurRadius="10"/>
            </Border.Effect>

            <Grid Margin="32,24">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Title Section -->
                <Grid Grid.Row="0" Margin="0,0,0,24">
                    <StackPanel>
                        <TextBlock Text="☁️ Upload to Microsoft Intune" FontSize="24" FontWeight="SemiBold" Foreground="White"/>
                        <TextBlock Name="AppSummaryText" Text="" FontSize="14" Foreground="#E3F2FD" Margin="0,4,0,0"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                        <TextBlock Name="StepIndicatorText" Text="Step 1 of 3" FontSize="14" FontWeight="Medium" Foreground="White"/>
                        <TextBlock Name="StepDescriptionText" Text="Configure application details" FontSize="12" Foreground="#E3F2FD" Margin="8,0,0,0"/>
                    </StackPanel>
                </Grid>

                <!-- Progress Indicators -->
                <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center">
                    <!-- Step 1: App Details -->
                    <StackPanel Name="Step1Indicator" Orientation="Horizontal" Margin="0,0,40,0">
                        <Border Name="Step1Circle" Width="40" Height="40" CornerRadius="20" Background="White" Margin="0,0,12,0">
                            <Grid>
                                <TextBlock Text="📄" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center" Name="Step1Icon"/>
                                <Border Name="Step1CheckMark" Background="#27AE60" CornerRadius="20" Visibility="Collapsed">
                                    <TextBlock Text="✓" FontSize="16" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" FontWeight="Bold"/>
                                </Border>
                            </Grid>
                        </Border>
                        <StackPanel VerticalAlignment="Center">
                            <TextBlock Text="App Details" FontSize="14" FontWeight="Medium" Foreground="White"/>
                            <TextBlock Text="Basic information" FontSize="11" Foreground="#E3F2FD"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Connection Line 1 -->
                    <Border Name="ConnectionLine1" Width="60" Height="2" Background="#E3F2FD" VerticalAlignment="Center" Margin="0,0,40,0"/>

                    <!-- Step 2: Detection Rules -->
                    <StackPanel Name="Step2Indicator" Orientation="Horizontal" Margin="0,0,40,0">
                        <Border Name="Step2Circle" Width="40" Height="40" CornerRadius="20" Background="#ffffff40" Margin="0,0,12,0">
                            <Grid>
                                <TextBlock Text="🔍" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center" Name="Step2Icon" Foreground="#E3F2FD"/>
                                <Border Name="Step2CheckMark" Background="#27AE60" CornerRadius="20" Visibility="Collapsed">
                                    <TextBlock Text="✓" FontSize="16" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" FontWeight="Bold"/>
                                </Border>
                            </Grid>
                        </Border>
                        <StackPanel VerticalAlignment="Center">
                            <TextBlock Text="Detection Rules" FontSize="14" FontWeight="Medium" Foreground="#E3F2FD"/>
                            <TextBlock Text="How to detect app" FontSize="11" Foreground="#E3F2FD"/>
                        </StackPanel>
                    </StackPanel>

                    <!-- Connection Line 2 -->
                    <Border Name="ConnectionLine2" Width="60" Height="2" Background="#ffffff40" VerticalAlignment="Center" Margin="0,0,40,0"/>

                    <!-- Step 3: Review & Upload -->
                    <StackPanel Name="Step3Indicator" Orientation="Horizontal">
                        <Border Name="Step3Circle" Width="40" Height="40" CornerRadius="20" Background="#ffffff40" Margin="0,0,12,0">
                            <Grid>
                                <TextBlock Text="🚀" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center" Name="Step3Icon" Foreground="#E3F2FD"/>
                                <Border Name="Step3CheckMark" Background="#27AE60" CornerRadius="20" Visibility="Collapsed">
                                    <TextBlock Text="✓" FontSize="16" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" FontWeight="Bold"/>
                                </Border>
                            </Grid>
                        </Border>
                        <StackPanel VerticalAlignment="Center">
                            <TextBlock Text="Review &amp; Upload" FontSize="14" FontWeight="Medium" Foreground="#E3F2FD"/>
                            <TextBlock Text="Final review" FontSize="11" Foreground="#E3F2FD"/>
                        </StackPanel>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Border>

        <!-- STEP CONTENT AREA -->
        <Grid Grid.Row="1" Margin="32,24,32,0">
            <ContentControl Name="StepContentArea" />
        </Grid>

        <!-- NAVIGATION FOOTER -->
        <Border Grid.Row="2" Background="White" Padding="32,20" BorderBrush="#E9ECEF" BorderThickness="0,1,0,0">
            <Grid>
                <StackPanel Orientation="Horizontal">
                    <!-- Validation Status -->
                    <Border Name="ValidationStatusPanel" Background="#F8F9FA" CornerRadius="6" Padding="12,8" Visibility="Collapsed">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Name="ValidationIcon" Text="⚠️" FontSize="14" Margin="0,0,8,0"/>
                            <TextBlock Name="ValidationMessage" Text="Please complete all required fields" FontSize="12" Foreground="#6C757D"/>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Navigation Buttons -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Name="PreviousButton" Content="← Previous" Style="{StaticResource WizardSecondaryButton}" 
                            Click="PreviousButton_Click" IsEnabled="False"/>
                    <Button Name="NextButton" Content="Continue →" Style="{StaticResource WizardPrimaryButton}" 
                            Click="NextButton_Click"/>
                    <Button Name="CancelButton" Content="Cancel" Style="{StaticResource WizardSecondaryButton}" 
                            Click="CancelButton_Click"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>