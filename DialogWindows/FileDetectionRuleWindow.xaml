<Window x:Class="IntunePackagingTool.FileDetectionRuleWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Add File Detection Rule" 
        Height="500" Width="650"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#F5F7FA">
    
    <Window.Resources>
        <Style TargetType="Button" x:Key="ModernButton">
            <Setter Property="Background" Value="#007BFF"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="16,10"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <Style TargetType="Button" x:Key="SecondaryButton" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="#6C757D"/>
        </Style>

        <Style TargetType="TextBox" x:Key="ModernTextBox">
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="BorderBrush" Value="#CED4DA"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Background" Value="White"/>
        </Style>

        <Style TargetType="ComboBox" x:Key="ModernComboBox">
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#CED4DA"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="ðŸ“ File Detection Rule" FontSize="20" FontWeight="SemiBold" Foreground="#212529"/>
            <TextBlock Text="Specify a file or folder to detect if the application is installed" FontSize="13" Foreground="#6C757D" Margin="0,5,0,0"/>
        </StackPanel>

        <!-- Main Content -->
        <Border Grid.Row="1" Background="White" BorderBrush="#DEE2E6" BorderThickness="1" CornerRadius="8" Padding="20">
            <StackPanel>
                
                <!-- File Path -->
                <TextBlock Text="File Location" FontSize="14" FontWeight="Medium" Foreground="#495057" Margin="0,0,0,10"/>
                
                <Grid Margin="0,0,0,20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="100"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Path:" VerticalAlignment="Center" FontSize="13" FontWeight="Medium" Foreground="#6C757D"/>
                    <TextBox Grid.Row="0" Grid.Column="1" Name="PathTextBox" Style="{StaticResource ModernTextBox}" Text="%ProgramFiles%"/>
                    <Button Grid.Row="0" Grid.Column="2" Name="BrowsePathButton" Content="ðŸ“" Style="{StaticResource SecondaryButton}" Width="40" Click="BrowsePathButton_Click"/>

                    <TextBlock Grid.Row="1" Grid.Column="0" Text="File Name:" VerticalAlignment="Center" FontSize="13" FontWeight="Medium" Foreground="#6C757D"/>
                    <TextBox Grid.Row="1" Grid.Column="1" Name="FileNameTextBox" Style="{StaticResource ModernTextBox}" Text="MyApp.exe"/>
                </Grid>

                <!-- Detection Type -->
                <TextBlock Text="Detection Method" FontSize="14" FontWeight="Medium" Foreground="#495057" Margin="0,0,0,10"/>
                
                <StackPanel Margin="0,0,0,20">
                    <RadioButton Name="FileExistsRadio" Content="File or folder exists" IsChecked="True" Margin="5" FontSize="13"/>
                    <RadioButton Name="FileVersionRadio" Content="File version" Margin="5" FontSize="13" Checked="FileVersionRadio_Checked" Unchecked="FileVersionRadio_Unchecked"/>
                    
                    <StackPanel Name="VersionPanel" Orientation="Horizontal" Visibility="Collapsed" Margin="25,5,5,5">
                        <ComboBox Name="OperatorComboBox" Style="{StaticResource ModernComboBox}" Width="200">
                            <ComboBoxItem Content="Greater than or equal to" IsSelected="True" Tag="greaterThanOrEqual"/>
                            <ComboBoxItem Content="Equal to" Tag="equal"/>
                            <ComboBoxItem Content="Greater than" Tag="greaterThan"/>
                            <ComboBoxItem Content="Less than" Tag="lessThan"/>
                            <ComboBoxItem Content="Not equal to" Tag="notEqual"/>
                        </ComboBox>
                        <TextBox Name="VersionTextBox" Style="{StaticResource ModernTextBox}" Width="150" Text="1.0.0"/>
                    </StackPanel>
                </StackPanel>

                <!-- Preview -->
                <TextBlock Text="Detection Rule Preview" FontSize="14" FontWeight="Medium" Foreground="#495057" Margin="0,0,0,10"/>
                <Border Background="#F8F9FA" BorderBrush="#DEE2E6" BorderThickness="1" CornerRadius="4" Padding="15">
                    <TextBlock Name="PreviewText" Text="File exists: %ProgramFiles%\MyApp.exe" FontFamily="Consolas" FontSize="12" Foreground="#495057" TextWrapping="Wrap"/>
                </Border>

            </StackPanel>
        </Border>

        <!-- Action Buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
            <Button Name="CancelButton" Content="Cancel" Style="{StaticResource SecondaryButton}" Click="CancelButton_Click"/>
            <Button Name="OkButton" Content="Add Detection Rule" Style="{StaticResource ModernButton}" Click="OkButton_Click"/>
        </StackPanel>

    </Grid>
</Window>