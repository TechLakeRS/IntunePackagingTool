<Window x:Class="IntunePackagingTool.AddRegistryDetectionDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Add Registry Detection Rule" 
        Height="550" Width="600"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        Background="#F5F7FA">
    
    <Window.Resources>
        <Style TargetType="Button" x:Key="ModernButton">
            <Setter Property="Background" Value="#007BFF"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="16,10"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <Style TargetType="Button" x:Key="SecondaryButton" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="#6C757D"/>
        </Style>

        <Style TargetType="TextBox" x:Key="ModernTextBox">
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="BorderBrush" Value="#CED4DA"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Background" Value="White"/>
        </Style>

        <Style TargetType="ComboBox" x:Key="ModernComboBox">
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#CED4DA"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="🗃️ Registry Detection Rule" FontSize="20" FontWeight="SemiBold" Foreground="#212529"/>
            <TextBlock Text="Create a rule that indicates the presence of the app" FontSize="13" Foreground="#6C757D" Margin="0,5,0,0"/>
        </StackPanel>

        <!-- Main Content -->
        <Border Grid.Row="1" Background="White" BorderBrush="#DEE2E6" BorderThickness="1" CornerRadius="8" Padding="20">
            <StackPanel>
                
                <!-- Rule Type -->
                <Grid Margin="0,0,0,20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="* Rule type:" VerticalAlignment="Center" FontSize="13" FontWeight="Medium" Foreground="#6C757D"/>
                    <ComboBox Grid.Column="1" x:Name="RuleTypeCombo" Style="{StaticResource ModernComboBox}">
                        <ComboBoxItem Content="Registry" IsSelected="True"/>
                    </ComboBox>
                </Grid>

                <!-- Key Path -->
                <Grid Margin="0,0,0,20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="* Key path:" VerticalAlignment="Center" FontSize="13" FontWeight="Medium" Foreground="#6C757D"/>
                    <ComboBox Grid.Column="1" x:Name="KeyPathCombo" Style="{StaticResource ModernComboBox}" IsEditable="True" Text="HKEY_LOCAL_MACHINE\SOFTWARE\">
                        <ComboBoxItem Content="HKEY_LOCAL_MACHINE\SOFTWARE\"/>
                        <ComboBoxItem Content="HKEY_CURRENT_USER\SOFTWARE\"/>
                        <ComboBoxItem Content="HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\"/>
                        <ComboBoxItem Content="HKEY_CLASSES_ROOT\"/>
                        <ComboBoxItem Content="HKEY_USERS\"/>
                        <ComboBoxItem Content="HKEY_CURRENT_CONFIG\"/>
                    </ComboBox>
                </Grid>

                <!-- Value Name -->
                <Grid Margin="0,0,0,20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="Value name:" VerticalAlignment="Center" FontSize="13" FontWeight="Medium" Foreground="#6C757D"/>
                    <TextBox Grid.Column="1" x:Name="ValueNameTextBox" Style="{StaticResource ModernTextBox}"/>
                </Grid>

                <!-- Detection Method -->
                <Grid Margin="0,0,0,20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="* Detection method:" VerticalAlignment="Center" FontSize="13" FontWeight="Medium" Foreground="#6C757D"/>
                    <ComboBox Grid.Column="1" x:Name="DetectionMethodCombo" Style="{StaticResource ModernComboBox}" SelectionChanged="DetectionMethodCombo_SelectionChanged">
                        <ComboBoxItem Content="Key exists" IsSelected="True"/>
                        <ComboBoxItem Content="Value exists"/>
                        <ComboBoxItem Content="String comparison"/>
                        <ComboBoxItem Content="Integer comparison"/>
                        <ComboBoxItem Content="Version comparison"/>
                    </ComboBox>
                </Grid>

                <!-- Value Comparison (Hidden by default) -->
                <Grid x:Name="ValueComparisonPanel" Margin="0,0,0,20" Visibility="Collapsed">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120"/>
                        <ColumnDefinition Width="200"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="Value:" VerticalAlignment="Center" FontSize="13" FontWeight="Medium" Foreground="#6C757D"/>
                    <ComboBox Grid.Column="1" x:Name="ComparisonOperatorCombo" Style="{StaticResource ModernComboBox}">
                        <ComboBoxItem Content="Equals" IsSelected="True"/>
                        <ComboBoxItem Content="Not equals"/>
                        <ComboBoxItem Content="Greater than"/>
                        <ComboBoxItem Content="Greater than or equal"/>
                        <ComboBoxItem Content="Less than"/>
                        <ComboBoxItem Content="Less than or equal"/>
                    </ComboBox>
                    <TextBox Grid.Column="2" x:Name="ComparisonValueTextBox" Style="{StaticResource ModernTextBox}"/>
                </Grid>

                <!-- 32-bit App Option -->
                <Grid Margin="0,0,0,20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="0" Text="Associated with a 32-bit app on 64-bit clients:" VerticalAlignment="Center" FontSize="13" FontWeight="Medium" Foreground="#6C757D" TextWrapping="Wrap"/>
                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                        <RadioButton x:Name="YesRadio" Content="Yes" Margin="5,0"/>
                        <RadioButton x:Name="NoRadio" Content="No" IsChecked="True" Margin="15,0,5,0"/>
                    </StackPanel>
                </Grid>

            </StackPanel>
        </Border>

        <!-- Action Buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
            <Button x:Name="CancelButton" Content="Cancel" Style="{StaticResource SecondaryButton}" Click="CancelButton_Click"/>
            <Button x:Name="OkButton" Content="OK" Style="{StaticResource ModernButton}" Click="OkButton_Click"/>
        </StackPanel>

    </Grid>
</Window>