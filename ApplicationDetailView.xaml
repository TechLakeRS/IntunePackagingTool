<UserControl x:Class="IntunePackagingTool.ApplicationDetailView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="900">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header with back button and app title -->
        <Grid Grid.Row="0" Background="#34495E">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0" Name="BackButton" 
                    Content="← Back to List" 
                    Click="BackButton_Click"
                    Background="Transparent" 
                    Foreground="White"
                    BorderThickness="0"
                    Padding="15,12"
                    FontWeight="Medium"
                    Style="{DynamicResource {x:Static ToolBar.ButtonStyleKey}}"/>


            <StackPanel Grid.Column="1" Orientation="Horizontal" 
                        VerticalAlignment="Center" Margin="10,12">
                <Border Width="32" Height="32" Margin="0,0,10,10"
                        Background="White" CornerRadius="4">
                    <Image x:Name="AppIconImage" 
                               Source="{Binding IconImage}" 
                               Width="28" Height="28"
                        RenderOptions.BitmapScalingMode="HighQuality"/>
                </Border>
                <TextBlock Name="AppTitleText" Text="Application Name" 
                           FontSize="18" FontWeight="SemiBold" 
                           Foreground="White"/>
            </StackPanel>

            <StackPanel Grid.Column="2" Orientation="Horizontal" 
                VerticalAlignment="Center" Margin="10">

                <!-- Enhanced Update Button -->
                <Button Name="UpdateApplicationButton"
                        Content="🔄 Update Package" 
                        Click="UpdateApplicationButton_Click"
                        Background="#2196F3" 
                        Foreground="White"
                        BorderThickness="0"
                        Padding="12,10"
                        Margin="0,0,8,0"
                        FontWeight="Medium"
                        ToolTip="Update this application with the latest files from the network share"
                        Style="{DynamicResource {x:Static ToolBar.ButtonStyleKey}}"/>

                <!-- Open Script Button -->
                <Button Name="OpenScriptButton"
                Content="📝 Open Script" 
                Click="OpenScriptButton_Click"
                Background="#E74C3C" 
                Foreground="White"
                BorderThickness="0"
                Padding="12,10"
                FontWeight="Medium"
                Style="{DynamicResource {x:Static ToolBar.ButtonStyleKey}}"/>
            </StackPanel>
        </Grid>

        <!-- Main content area -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Margin="20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="15"/>
                    <ColumnDefinition Width="1*"/>
                </Grid.ColumnDefinitions>

                <!-- Left column -->
                <StackPanel Grid.Column="0">
                    <!-- Basic Information -->
                    <Border Background="#F8F9FA" CornerRadius="6" Padding="20" Margin="0,0,0,15"
                            BorderBrush="#E1E8ED" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="📋 Basic Information" 
                                       FontSize="16" FontWeight="SemiBold" 
                                       Foreground="#2C3E50" Margin="0,0,0,15"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="140"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Name:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="0" Grid.Column="1" Name="AppNameText" Text="Application Name" Margin="0,8" TextWrapping="Wrap"/>

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Version:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="1" Grid.Column="1" Name="AppVersionText" Text="1.0.0" Margin="0,8"/>

                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Publisher:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="2" Grid.Column="1" Name="PublisherText" Text="Publisher Name" Margin="0,8"/>

                                <TextBlock Grid.Row="3" Grid.Column="0" Text="Category:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="3" Grid.Column="1" Name="CategoryText" Text="Category" Margin="0,8"/>

                                <TextBlock Grid.Row="4" Grid.Column="0" Text="Install Context:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="4" Grid.Column="1" Name="InstallContextText" Text="System" Margin="0,8"/>

                                <TextBlock Grid.Row="5" Grid.Column="0" Text="Owner:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="5" Grid.Column="1" Name="OwnerText" Text="" Margin="0,8"/>

                                <TextBlock Grid.Row="6" Grid.Column="0" Text="Developer:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="6" Grid.Column="1" Name="DeveloperText" Text="" Margin="0,8"/>

                                <TextBlock Grid.Row="7" Grid.Column="0" Text="File Size:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="7" Grid.Column="1" Name="FileSizeText" Text="" Margin="0,8"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Description -->
                    <Border Background="#F8F9FA" CornerRadius="6" Padding="20" Margin="0,0,0,15"
                            BorderBrush="#E1E8ED" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="📝 Description" 
                                       FontSize="16" FontWeight="SemiBold" 
                                       Foreground="#2C3E50" Margin="0,0,0,15"/>
                            <TextBlock Name="DescriptionText" 
                                       Text="Application description will appear here..."
                                       TextWrapping="Wrap"
                                       LineHeight="20"
                                       Foreground="#555"/>
                        </StackPanel>
                    </Border>

                    <!-- File & Publishing Information -->
                    <Border Background="#F8F9FA" CornerRadius="6" Padding="20" Margin="0,0,0,15"
                            BorderBrush="#E1E8ED" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="📄 File and Publishing Information" 
                                       FontSize="16" FontWeight="SemiBold" 
                                       Foreground="#2C3E50" Margin="0,0,0,15"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="140"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="File Name:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="0" Grid.Column="1" Name="FileNameText" Text="" Margin="0,8" FontFamily="Consolas"/>

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Setup File Path:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="1" Grid.Column="1" Name="SetupFilePathText" Text="" Margin="0,8" FontFamily="Consolas" TextWrapping="Wrap"/>

                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Upload State:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="2" Grid.Column="1" Name="UploadStateText" Text="" Margin="0,8"/>

                                <TextBlock Grid.Row="3" Grid.Column="0" Text="Publishing State:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="3" Grid.Column="1" Name="PublishingStateText" Text="" Margin="0,8"/>

                                <TextBlock Grid.Row="4" Grid.Column="0" Text="Is Featured:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="4" Grid.Column="1" Name="IsFeaturedText" Text="" Margin="0,8"/>

                                <TextBlock Grid.Row="5" Grid.Column="0" Text="Created:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="5" Grid.Column="1" Name="CreatedDateText" Text="" Margin="0,8"/>

                                <TextBlock Grid.Row="6" Grid.Column="0" Text="Last Modified:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="6" Grid.Column="1" Name="LastModifiedText" Text="" Margin="0,8"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- System Requirements -->
                    <Border Background="#F8F9FA" CornerRadius="6" Padding="20" Margin="0,0,0,15"
                            BorderBrush="#E1E8ED" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="💻 System Requirements" 
                                       FontSize="16" FontWeight="SemiBold" 
                                       Foreground="#2C3E50" Margin="0,0,0,15"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="140"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Disk Space:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="0" Grid.Column="1" Name="DiskSpaceText" Text="" Margin="0,8"/>

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Memory:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="1" Grid.Column="1" Name="MemoryText" Text="" Margin="0,8"/>

                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Processors:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="2" Grid.Column="1" Name="ProcessorsText" Text="" Margin="0,8"/>

                                <TextBlock Grid.Row="3" Grid.Column="0" Text="CPU Speed:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="3" Grid.Column="1" Name="CpuSpeedText" Text="" Margin="0,8"/>

                                <TextBlock Grid.Row="4" Grid.Column="0" Text="Architectures:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="4" Grid.Column="1" Name="ArchitecturesText" Text="" Margin="0,8"/>

                                <TextBlock Grid.Row="5" Grid.Column="0" Text="Min Windows:" FontWeight="Medium" Margin="0,8" Foreground="#555"/>
                                <TextBlock Grid.Row="5" Grid.Column="1" Name="MinWindowsText" Text="" Margin="0,8"/>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Detection Rules -->
                    <Border Background="#F8F9FA" CornerRadius="6" Padding="20" Margin="0,0,0,15"
                            BorderBrush="#E1E8ED" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="🔍 Detection Rules" 
                                       FontSize="16" FontWeight="SemiBold" 
                                       Foreground="#2C3E50" Margin="0,0,0,15"/>

                            <ItemsControl Name="DetectionRulesList">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="White" CornerRadius="4" 
                                                Padding="12" Margin="0,0,0,8"
                                                BorderBrush="#E1E8ED" BorderThickness="1">
                                            <StackPanel>
                                                <TextBlock Text="{Binding Title}" FontWeight="Medium" FontSize="12" Foreground="#3498DB"/>
                                                <TextBlock Text="{Binding Description}" Margin="0,4,0,0" FontSize="11" 
                                                           Foreground="#666" TextWrapping="Wrap"/>
                                            </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </Border>

                    <!-- Return Codes -->
                    <Border Background="#F8F9FA" CornerRadius="6" Padding="20" Margin="0,0,0,15"
                            BorderBrush="#E1E8ED" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="🔢 Return Codes" 
                                       FontSize="16" FontWeight="SemiBold" 
                                       Foreground="#2C3E50" Margin="0,0,0,15"/>

                            <ItemsControl Name="ReturnCodesList">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="White" CornerRadius="4" 
                                                Padding="10" Margin="0,0,0,6"
                                                BorderBrush="#E1E8ED" BorderThickness="1">
                                            <TextBlock Text="{Binding Description}" FontSize="12"/>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Right column -->
                <StackPanel Grid.Column="2">

                    <!-- Assignment Groups -->
                    <Border Background="#F8F9FA" CornerRadius="6" Padding="20" Margin="0,0,0,15"
                            BorderBrush="#E1E8ED" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="👥 Assigned Groups" 
                                       FontSize="16" FontWeight="SemiBold" 
                                       Foreground="#2C3E50" Margin="0,0,0,15"/>

                            <ItemsControl Name="AssignedGroupsList">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="White" CornerRadius="4" 
                                                Padding="10" Margin="0,0,0,8"
                                                BorderBrush="#E1E8ED" BorderThickness="1">
                                            <StackPanel>
                                                <TextBlock Text="{Binding GroupName}" FontWeight="Medium" FontSize="12"/>
                                                <TextBlock Text="{Binding AssignmentType}" FontSize="11" 
                                                           Foreground="#666" Margin="0,2,0,0"/>
                                            </StackPanel>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </Border>

                    <!-- Installation Commands -->
                    <Border Background="#F8F9FA" CornerRadius="6" Padding="20" Margin="0,0,0,15"
                            BorderBrush="#E1E8ED" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="⚙️ Installation Commands" 
                                       FontSize="16" FontWeight="SemiBold" 
                                       Foreground="#2C3E50" Margin="0,0,0,15"/>

                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Text="Install Command:" FontWeight="Medium" 
                                           Margin="0,5" Foreground="#555"/>
                                <Border Grid.Row="1" Background="#F0F0F0" CornerRadius="3" Padding="8" Margin="0,2,0,10">
                                    <TextBlock Name="InstallCommandText" 
                                               Text="Deploy-Application.exe Install" 
                                               FontFamily="Consolas" FontSize="11" TextWrapping="Wrap"/>
                                </Border>

                                <TextBlock Grid.Row="2" Text="Uninstall Command:" FontWeight="Medium" 
                                           Margin="0,5" Foreground="#555"/>
                                <Border Grid.Row="3" Background="#F0F0F0" CornerRadius="3" Padding="8" Margin="0,2,0,0">
                                    <TextBlock Name="UninstallCommandText" 
                                               Text="Deploy-Application.exe Uninstall" 
                                               FontFamily="Consolas" FontSize="11" TextWrapping="Wrap"/>
                                </Border>
                            </Grid>
                        </StackPanel>
                    </Border>



                    <!-- URLs & Links -->
                    <Border Background="#F8F9FA" CornerRadius="6" Padding="20" Margin="0,0,0,15"
                            BorderBrush="#E1E8ED" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="🔗 URLs and Links" 
                                       FontSize="16" FontWeight="SemiBold" 
                                       Foreground="#2C3E50" Margin="0,0,0,15"/>

                            <StackPanel Name="UrlsPanel">
                                <StackPanel Name="PrivacyUrlPanel" Visibility="Collapsed" Margin="0,0,0,8">
                                    <TextBlock Text="Privacy Information:" FontWeight="Medium" Foreground="#555" FontSize="12"/>
                                    <TextBlock Name="PrivacyUrlText" Text="" Foreground="#3498DB" 
                                               TextDecorations="Underline" Cursor="Hand" FontSize="11"
                                               MouseLeftButtonUp="PrivacyUrl_Click"/>
                                </StackPanel>

                                <StackPanel Name="InfoUrlPanel" Visibility="Collapsed" Margin="0,0,0,8">
                                    <TextBlock Text="Information URL:" FontWeight="Medium" Foreground="#555" FontSize="12"/>
                                    <TextBlock Name="InfoUrlText" Text="" Foreground="#3498DB" 
                                               TextDecorations="Underline" Cursor="Hand" FontSize="11"
                                               MouseLeftButtonUp="InfoUrl_Click"/>
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <!-- Enhanced Network Share Info Section with Manual Browse -->
                    <Border Background="#E8F5E8" CornerRadius="6" Padding="20"
                            BorderBrush="#C8E6C9" BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="📁 Source Files" 
                                       FontSize="16" FontWeight="SemiBold" 
                                       Foreground="#2E7D32" Margin="0,0,0,15"/>

                            <TextBlock Text="Package Path:" FontWeight="Medium" 
                                       Margin="0,0,0,5" Foreground="#2E7D32"/>
                            <Border Background="White" CornerRadius="3" Padding="8" Margin="0,0,0,15">
                                <TextBlock Name="SourcePathText" 
                                           Text="Searching for network path..."
                                           FontFamily="Consolas" FontSize="11" 
                                           TextWrapping="Wrap"/>
                            </Border>

                            <!-- Action buttons panel - shown when path is found -->
                            <StackPanel Name="ActionButtonsPanel" Orientation="Horizontal" Visibility="Collapsed" Margin="0,0,0,10">
                                <Button Name="OpenFolderButton" Content="📂 Open Folder" 
                                        Click="OpenFolderButton_Click"
                                        Background="#27AE60" Foreground="White"
                                        BorderThickness="0" Padding="10,6" 
                                        Margin="0,0,10,0"
                                        Style="{DynamicResource {x:Static ToolBar.ButtonStyleKey}}"/>

                                <Button Name="CopyPathButton" Content="📋 Copy Path" 
                                        Click="CopyPathButton_Click"
                                        Background="#95A5A6" Foreground="White"
                                        BorderThickness="0" Padding="10,6"
                                        Margin="0,0,10,0"
                                        Style="{DynamicResource {x:Static ToolBar.ButtonStyleKey}}"/>

                                <Button Name="ChangePathButton" Content="🔄 Change Path" 
                                        Click="BrowsePackageFolderButton_Click"
                                        Background="#E67E22" Foreground="White"
                                        BorderThickness="0" Padding="10,6"
                                        ToolTip="Browse for a different Deploy-Application.exe file"
                                        Style="{DynamicResource {x:Static ToolBar.ButtonStyleKey}}"/>
                            </StackPanel>

                            <!-- Manual browse panel - shown when path is not found -->
                            <StackPanel Name="ManualBrowsePanel" Orientation="Horizontal" Visibility="Collapsed" Margin="0,0,0,10">
                                <Button Name="BrowsePackageButton" Content="📂 Browse for Deploy-Application.exe" 
                                        Click="BrowsePackageFolderButton_Click"
                                        Background="#F39C12" Foreground="White"
                                        BorderThickness="0" Padding="12,8" 
                                        FontWeight="Medium"
                                        ToolTip="Manually browse for the Deploy-Application.exe file"
                                        Style="{DynamicResource {x:Static ToolBar.ButtonStyleKey}}"/>
                            </StackPanel>

                            <!-- Help text -->
                            <TextBlock Name="PathHelpText" 
                                       Text="The package folder should contain an 'Application' subfolder with Deploy-Application.exe"
                                       Foreground="#666" FontSize="11" FontStyle="Italic" 
                                       TextWrapping="Wrap" Margin="0,5,0,0"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>
        </ScrollViewer>

        <!-- Bottom status bar -->
        <Border Grid.Row="2" Background="#ECF0F1" Height="35" BorderBrush="#BDC3C7" BorderThickness="0,1,0,0">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="20,0">
                <TextBlock Name="StatusText" Text="Application details loaded" 
                           Foreground="#666" FontSize="12"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>